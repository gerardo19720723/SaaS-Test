import{i as P,a as D,b as y,r as k,p as Y,s as z,c as B}from"./index.JoXsz-Yp.js";import{p as G,t as I,a as S,g as e,e as q,b as R,c as H,s as p,d as l,r as i,f as o,m as c,h as J,i as f}from"./render.CO7qvLqz.js";var K=I('<input type="text" placeholder="Nombre (opcional)" class="w-full p-2 border rounded">'),Q=I("<p> </p>"),V=I('<div class="p-6 bg-white rounded-lg shadow-lg max-w-md mx-auto"><h2 class="text-2xl font-bold mb-4"> </h2> <form class="space-y-4"><!> <input type="email" placeholder="Email" class="w-full p-2 border rounded" required> <input type="password" placeholder="ContraseÃ±a" class="w-full p-2 border rounded" required> <button type="submit" class="w-full bg-blue-500 text-white p-2 rounded hover:bg-blue-600 disabled:opacity-50"> </button></form> <!> <div class="mt-4 text-center"><button class="text-blue-500 hover:underline"> </button></div></div>');function Z(L,U){G(U,!1);let n=c(""),u=c(""),m=c(""),d=c(""),g=c(!1),s=c(!0);const $="http://localhost:3002/api";async function A(){o(g,!0),o(d,""),console.log("ðŸš€ Enviando peticiÃ³n a:",`${$}${e(s)?"/auth/login":"/auth/register"}`),console.log("ðŸ“§ Datos:",{email:e(n),password:e(u),name:e(m)||e(n).split("@")[0]});try{const t=e(s)?"/auth/login":"/auth/register",a=e(s)?{email:e(n),password:e(u)}:{email:e(n),password:e(u),name:e(m)||e(n).split("@")[0]},r=await B.post(`${$}${t}`,a,{timeout:5e3,headers:{"Content-Type":"application/json"}});console.log("âœ… Respuesta exitosa:",r.data),o(d,`âœ… ${e(s)?"Login":"Registro"} exitoso!`),e(s)&&r.data.token&&(localStorage.setItem("token",r.data.token),console.log("ðŸ”‘ Token guardado:",r.data.token))}catch(t){console.log("âŒ Error completo:",t),console.log("âŒ Error response:",t.response),console.log("âŒ Error message:",t.message),console.log("âŒ Error status:",t.response?.status),console.log("âŒ Error data:",t.response?.data);let a="Error desconocido";t.code==="ECONNREFUSED"?a="âŒ No se puede conectar con el servidor":t.code==="ETIMEDOUT"?a="âŒ Timeout de conexiÃ³n":t.response?.status===404?a="âŒ Endpoint no encontrado":t.response?.data?.error?a=t.response.data.error:t.message&&(a=t.message),o(d,a)}finally{o(g,!1)}}P();var b=V(),h=l(b),F=l(h,!0);i(h);var v=p(h,2),N=l(v);D(N,()=>!e(s),t=>{var a=K();k(a),y(a,()=>e(m),r=>o(m,r)),R(t,a)});var _=p(N,2);k(_);var x=p(_,2);k(x);var w=p(x,2),M=l(w,!0);i(w),i(v);var T=p(v,2);D(T,()=>e(d),t=>{var a=Q();const r=J(()=>`mt-4 text-center ${(e(d).includes("âŒ")?"text-red-600":"text-green-600")??""}`);var j=l(a,!0);i(a),S(()=>{z(a,e(r)),f(j,e(d))}),R(t,a)});var C=p(T,2),E=l(C),O=l(E,!0);i(E),i(C),i(b),S(()=>{f(F,e(s)?"Iniciar SesiÃ³n":"Registrarse"),w.disabled=e(g),f(M,e(g)?"Cargando...":e(s)?"Ingresar":"Registrarse"),f(O,e(s)?"Â¿No tienes cuenta? RegÃ­strate":"Â¿Ya tienes cuenta? Inicia sesiÃ³n")}),y(_,()=>e(n),t=>o(n,t)),y(x,()=>e(u),t=>o(u,t)),q("submit",v,Y(A)),q("click",E,()=>o(s,!e(s))),R(L,b),H()}export{Z as default};
